<div class="container-fluid">
  <h2>Registration</h2>
  {{ registrationForm.value | json }}
  <form [formGroup]="registrationForm">
    <div class="form-group row">
      <label>User name</label>
      <input
        type="text"
        class="form-control"
        name="userName"
        formControlName="userName"
        [class.is-invalid]="userName?.invalid && userName?.touched"
      />
      <div *ngIf="userName?.invalid && userName?.touched">
        <span *ngIf="userName?.errors?.['required']" class="text-danger"
          >É necessário preencher este campo.</span
        >
        <small
          class="text-danger"
          [class.d-none]="userName?.errors?.['minLength']"
          >Nome precisa ser com mais de x caracteres. </small
        >
        <small
          class="text-danger"
          [class.d-none]="userName?.errors?.['forbiddenName']"
          >Esse nome não rola, é proibído. </small
        >
      </div>
    </div>
    <div class="form-group row">
      <label for="email">E-mail</label>
      <input
        type="email"
        class="form-control"
        name="email"
        formControlName="email"
        [class.is-invalid]="
          registrationForm.get('email')?.invalid &&
          registrationForm.get('email')?.touched
        "
      />
      <small
        class="text-danger"
        [class.d-none]="
          registrationForm.get('email')?.valid ||
          registrationForm.get('email')?.untouched
        "
        >E-mail is not valid</small
      >
    </div>
    <div class="form-group row">
      <div class="col-md-3">
        <label for="password">Password</label>
        <input
          type="password"
          class="form-control"
          name="password"
          formControlName="password"
        />
      </div>
      <div class="col-md-3">
        <label for="confimPassword">Confirm Password</label>
        <input
          type="password"
          class="form-control"
          name="confimPassword"
          formControlName="confimPassword"
        />
      </div>
      <div class="form-group row" formGroupName="address">
        <h4>Address</h4>
        <div class="col-md-4">
          <label for="street">Rua</label>
          <input
            type="text"
            class="form-control"
            name="street"
            formControlName="street"
          />
        </div>
        <div class="col-md-4">
          <label for="complement">Complemento</label>
          <input
            type="text"
            class="form-control"
            name="complement"
            formControlName="complement"
          />
        </div>
        <div class="col-md-4">
          <label for="neighborhood">Bairro</label>
          <input
            type="text"
            class="form-control"
            name="neighborhood"
            formControlName="neighborhood"
          />
        </div>
        <div class="col-md-4">
          <label for="cep">CEP</label>
          <input
            type="text"
            class="form-control"
            name="cep"
            formControlName="cep"
          />
        </div>
      </div>
    </div>

    <button class="btn btn-primary" type="submit">Register</button>
    <button
      (click)="loadApiData()"
      class="btn btn-secondary ml-2"
      type="button"
    >
      Load API data
    </button>
  </form>
</div>
